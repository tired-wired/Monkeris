<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link rel="stylesheet" href="dmdoc.css"><title>/atom - Space Station 13</title></head><body><header><a href="index.html">Space Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="atom.html#var">Var Details</a> - <a href="atom.html#proc">Proc Details</a></header><main><h1>atom <aside>/<a href="atom.html">atom</a></aside><aside> inherits /<a href="datum.html">datum</a></aside> <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/game/atoms.dm#L1"><img src="git.png" width="16" height="16" title="code/game/atoms.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="atom.html#var/chat_color">chat_color</a></th><td>Last color calculated for the the chatmessage overlays</td></tr><tr><th><a href="atom.html#var/chat_color_darkened">chat_color_darkened</a></th><td>A luminescence-shifted value of the last color calculated for chatmessage overlays</td></tr><tr><th><a href="atom.html#var/chat_color_name">chat_color_name</a></th><td>Last name used to calculate a color for the chatmessage overlays</td></tr><tr><th><a href="atom.html#var/realized_overlays">realized_overlays</a></th><td>List of overlay &quot;keys&quot; (info about the appearance) -&gt; mutable versions of static appearances
Drawn from the overlays list</td></tr><tr><th><a href="atom.html#var/realized_underlays">realized_underlays</a></th><td>List of underlay &quot;keys&quot; (info about the appearance) -&gt; mutable versions of static appearances
Drawn from the underlays list</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="atom.html#proc/Destroy">Destroy</a></th><td>Top level of the destroy chain for most atoms</td></tr><tr><th><a href="atom.html#proc/GenerateTag">GenerateTag</a></th><td>Generate a tag for this atom</td></tr><tr><th><a href="atom.html#proc/Initialize">Initialize</a></th><td>The primary method that objects are setup in SS13 with</td></tr><tr><th><a href="atom.html#proc/LateInitialize">LateInitialize</a></th><td>Late Intialization, for code that should run after all atoms have run Intialization</td></tr><tr><th><a href="atom.html#proc/New">New</a></th><td>Called when an atom is created in byond (built in engine proc)</td></tr><tr><th><a href="atom.html#proc/SetName">SetName</a></th><td>Name Set Handling</td></tr><tr><th><a href="atom.html#proc/Shake">Shake</a></th><td>Perform a shake on an atom, resets its position afterwards</td></tr><tr><th><a href="atom.html#proc/get_alarm_z">get_alarm_z</a></th><td>Assisting procs</td></tr><tr><th><a href="atom.html#proc/get_visible_name">get_visible_name</a></th><td>Used by mobs to determine the name for someone wearing a mask, or with a disfigured or missing face. By default just returns the atom's name. add_id_name will control whether or not we append &quot;(as [id_name])&quot;.</td></tr><tr><th><a href="atom.html#proc/log_message">log_message</a></th><td>Generic logging helper</td></tr><tr><th><a href="atom.html#proc/log_talk">log_talk</a></th><td>Helper for logging chat messages or other logs with arbitrary inputs (e.g. announcements)</td></tr><tr><th><a href="atom.html#proc/realize_overlays">realize_overlays</a></th><td>Takes the atoms's existing overlays and underlays, and makes them mutable so they can be properly vv'd in the realized_overlays/underlays list</td></tr><tr><th><a href="atom.html#proc/runechat_prefs_check">runechat_prefs_check</a></th><td>Returns the client runechat visible messages preference according to the message type.</td></tr><tr><th><a href="atom.html#proc/set_density">set_density</a></th><td>Density Handling</td></tr><tr><th><a href="atom.html#proc/set_dir">set_dir</a></th><td>Direction Handling</td></tr><tr><th><a href="atom.html#proc/set_invisibility">set_invisibility</a></th><td>Invisibility Set Handling</td></tr><tr><th><a href="atom.html#proc/set_opacity">set_opacity</a></th><td>Opacity Handling</td></tr><tr><th><a href="atom.html#proc/singuloCanEat">singuloCanEat</a></th><td>Nar-Sie Act/Pull</td></tr><tr><th><a href="atom.html#proc/spasm_animation">spasm_animation</a></th><td>Similar to shake but more spasm-y and jerk-y</td></tr><tr><th><a href="atom.html#proc/vv_edit_var">vv_edit_var</a></th><td>call back when a var is edited on this atom</td></tr><tr><th><a href="atom.html#proc/vv_get_dropdown">vv_get_dropdown</a></th><td>Return the markup to for the dropdown list for the VV panel for this atom</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/chat_color"><aside class="declaration">var </aside>chat_color <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/game/atoms.dm#L23"><img src="git.png" width="16" height="16" title="code/game/atoms.dm 23"></a></h3><p>Last color calculated for the the chatmessage overlays</p><h3 id="var/chat_color_darkened"><aside class="declaration">var </aside>chat_color_darkened <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/game/atoms.dm#L25"><img src="git.png" width="16" height="16" title="code/game/atoms.dm 25"></a></h3><p>A luminescence-shifted value of the last color calculated for chatmessage overlays</p><h3 id="var/chat_color_name"><aside class="declaration">var </aside>chat_color_name <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/game/atoms.dm#L21"><img src="git.png" width="16" height="16" title="code/game/atoms.dm 21"></a></h3><p>Last name used to calculate a color for the chatmessage overlays</p><h3 id="var/realized_overlays"><aside class="declaration">var </aside>realized_overlays <aside>– /list</aside> <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/modules/admin/view_variables/debug_variable_appearance.dm#L86"><img src="git.png" width="16" height="16" title="code/modules/admin/view_variables/debug_variable_appearance.dm 86"></a></h3><p>List of overlay &quot;keys&quot; (info about the appearance) -&gt; mutable versions of static appearances
Drawn from the overlays list</p><h3 id="var/realized_underlays"><aside class="declaration">var </aside>realized_underlays <aside>– /list</aside> <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/modules/admin/view_variables/debug_variable_appearance.dm#L89"><img src="git.png" width="16" height="16" title="code/modules/admin/view_variables/debug_variable_appearance.dm 89"></a></h3><p>List of underlay &quot;keys&quot; (info about the appearance) -&gt; mutable versions of static appearances
Drawn from the underlays list</p><h2 id="proc">Proc Details</h2><h3 id="proc/Destroy">Destroy<aside>()  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/game/atoms.dm#L162"><img src="git.png" width="16" height="16" title="code/game/atoms.dm 162"></a></aside></h3><p>Top level of the destroy chain for most atoms</p>
<p>Cleans up the following:</p>
<ul>
<li>Removes alternate apperances from huds that see them</li>
<li>qdels the reagent holder from atoms if it exists</li>
<li>Clears itself from any targeting-related vars that hold a reference to it</li>
<li>clears the orbiters list</li>
<li>clears overlays and priority overlays</li>
<li>clears the light object</li>
</ul><h3 id="proc/GenerateTag"><aside class="declaration">proc </aside>GenerateTag<aside>()  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/game/atoms.dm#L180"><img src="git.png" width="16" height="16" title="code/game/atoms.dm 180"></a></aside></h3><p>Generate a tag for this atom</p><h3 id="proc/Initialize"><aside class="declaration">proc </aside>Initialize<aside>(mapload, ...)  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/game/atoms.dm#L116"><img src="git.png" width="16" height="16" title="code/game/atoms.dm 116"></a></aside></h3><p>The primary method that objects are setup in SS13 with</p>
<p>we don't use New as we have better control over when this is called and we can choose
to delay calls or hook other logic in and so forth</p>
<p>During roundstart map parsing, atoms are queued for intialization in the base atom/New(),
After the map has loaded, then Initalize is called on all atoms one by one. NB: this
is also true for loading map templates as well, so they don't Initalize until all objects
in the map file are parsed and present in the world</p>
<p>If you're creating an object at any point after SSInit has run then this proc will be
immediately be called from New.</p>
<p>mapload: This parameter is true if the atom being loaded is either being intialized during
the Atom subsystem intialization, or if the atom is being loaded from the map template.
If the item is being created at runtime any time after the Atom subsystem is intialized then
it's false.</p>
<p>You must always call the parent of this proc, otherwise failures will occur as the item
will not be seen as initalized (this can lead to all sorts of strange behaviour, like
the item being completely unclickable)</p>
<p>You must not sleep in this proc, or any subprocs</p>
<p>Any parameters from new are passed through (excluding loc), naturally if you're loading from a map
there are no other arguments</p>
<p>Must return an <a href="code/__DEFINES/subsystems.html#define/INITIALIZE_HINT_NORMAL" title="INITIALIZE_HINT_NORMAL">initialization hint</a> or a runtime will occur.</p>
<p>Note: the following functions don't call the base for optimization and must copypasta handling:</p>
<ul>
<li>[/turf/proc/Initialize]</li>
<li>[/turf/open/space/proc/Initialize]</li>
</ul><h3 id="proc/LateInitialize"><aside class="declaration">proc </aside>LateInitialize<aside>()  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/game/atoms.dm#L148"><img src="git.png" width="16" height="16" title="code/game/atoms.dm 148"></a></aside></h3><p>Late Intialization, for code that should run after all atoms have run Intialization</p>
<p>To have your LateIntialize proc be called, your atoms <a href="atom.html#proc/Initialize" title="/atom">Initalization</a>
proc must return the hint
<a href="code/__DEFINES/subsystems.html#define/INITIALIZE_HINT_LATELOAD" title="INITIALIZE_HINT_LATELOAD">INITIALIZE_HINT_LATELOAD</a> otherwise you will never be called.</p>
<p>useful for doing things like finding other machines on GLOB.machines because you can guarantee
that all atoms will actually exist in the &quot;WORLD&quot; at this time and that all their Intialization
code has been run</p><h3 id="proc/New">New<aside>(loc, ...)  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/game/atoms.dm#L67"><img src="git.png" width="16" height="16" title="code/game/atoms.dm 67"></a></aside></h3><p>Called when an atom is created in byond (built in engine proc)</p>
<p>Not a lot happens here in SS13 code, as we offload most of the work to the
<a href="atom.html#proc/Initialize" title="/atom">Intialization</a> proc, mostly we run the preloader
if the preloader is being used and then call <a href="datum/controller/subsystem/atoms.html#proc/InitAtom" title="/datum/controller/subsystem/atoms">InitAtom</a> of which the ultimate
result is that the Intialize proc is called.</p>
<p>We also generate a tag here if the DF_USE_TAG flag is set on the atom</p><h3 id="proc/SetName"><aside class="declaration">proc </aside>SetName<aside>(new_name)  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/datums/observation/name_set.dm#L21"><img src="git.png" width="16" height="16" title="code/datums/observation/name_set.dm 21"></a></aside></h3><p>Name Set Handling</p><h3 id="proc/Shake"><aside class="declaration">proc </aside>Shake<aside>(pixelshiftx, pixelshifty, duration, shake_interval)  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/__HELPERS/matrices.dm#L53"><img src="git.png" width="16" height="16" title="code/__HELPERS/matrices.dm 53"></a></aside></h3><p>Perform a shake on an atom, resets its position afterwards</p><h3 id="proc/get_alarm_z"><aside class="declaration">proc </aside>get_alarm_z<aside>()  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/modules/alarm/alarm.dm#L109"><img src="git.png" width="16" height="16" title="code/modules/alarm/alarm.dm 109"></a></aside></h3><p>Assisting procs</p><h3 id="proc/get_visible_name"><aside class="declaration">proc </aside>get_visible_name<aside>(add_id_name)  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/game/atoms.dm#L355"><img src="git.png" width="16" height="16" title="code/game/atoms.dm 355"></a></aside></h3><p>Used by mobs to determine the name for someone wearing a mask, or with a disfigured or missing face. By default just returns the atom's name. add_id_name will control whether or not we append &quot;(as [id_name])&quot;.</p><h3 id="proc/log_message"><aside class="declaration">proc </aside>log_message<aside>(message, message_type, color, log_globally)  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/__HELPERS/logging/_logging.dm#L106"><img src="git.png" width="16" height="16" title="code/__HELPERS/logging/_logging.dm 106"></a></aside></h3><p>Generic logging helper</p>
<p>reads the type of the log
and writes it to the respective log file
unless log_globally is FALSE
Arguments:</p>
<ul>
<li>message - The message being logged</li>
<li>message_type - the type of log the message is(ATTACK, SAY, etc)</li>
<li>color - color of the log text</li>
<li>log_globally - boolean checking whether or not we write this log to the log file</li>
</ul><h3 id="proc/log_talk"><aside class="declaration">proc </aside>log_talk<aside>(message, message_type, tag, log_globally, forced_by, custom_say_emote)  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/__HELPERS/logging/talk.dm#L14"><img src="git.png" width="16" height="16" title="code/__HELPERS/logging/talk.dm 14"></a></aside></h3><p>Helper for logging chat messages or other logs with arbitrary inputs (e.g. announcements)</p>
<p>This proc compiles a log string by prefixing the tag to the message
and suffixing what it was forced_by if anything
if the message lacks a tag and suffix then it is logged on its own
Arguments:</p>
<ul>
<li>message - The message being logged</li>
<li>message_type - the type of log the message is(ATTACK, SAY, etc)</li>
<li>tag - tag that indicates the type of text(announcement, telepathy, etc)</li>
<li>log_globally - boolean checking whether or not we write this log to the log file</li>
<li>forced_by - source that forced the dialogue if any</li>
</ul><h3 id="proc/realize_overlays"><aside class="declaration">proc </aside>realize_overlays<aside>()  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/modules/admin/view_variables/debug_variable_appearance.dm#L100"><img src="git.png" width="16" height="16" title="code/modules/admin/view_variables/debug_variable_appearance.dm 100"></a></aside></h3><p>Takes the atoms's existing overlays and underlays, and makes them mutable so they can be properly vv'd in the realized_overlays/underlays list</p><h3 id="proc/runechat_prefs_check"><aside class="declaration">proc </aside>runechat_prefs_check<aside>(/<a href="mob.html">mob</a>/target, visible_message_flags)  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/modules/mob/mob.dm#L115"><img src="git.png" width="16" height="16" title="code/modules/mob/mob.dm 115"></a></aside></h3><p>Returns the client runechat visible messages preference according to the message type.</p><h3 id="proc/set_density"><aside class="declaration">proc </aside>set_density<aside>(new_density)  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/datums/observation/density_set.dm#L20"><img src="git.png" width="16" height="16" title="code/datums/observation/density_set.dm 20"></a></aside></h3><p>Density Handling</p><h3 id="proc/set_dir"><aside class="declaration">proc </aside>set_dir<aside>()  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/datums/observation/dir_set.dm#L28"><img src="git.png" width="16" height="16" title="code/datums/observation/dir_set.dm 28"></a></aside></h3><p>Direction Handling</p><h3 id="proc/set_invisibility"><aside class="declaration">proc </aside>set_invisibility<aside>(new_invisibility)  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/datums/observation/set_invisibility.dm#L21"><img src="git.png" width="16" height="16" title="code/datums/observation/set_invisibility.dm 21"></a></aside></h3><p>Invisibility Set Handling</p><h3 id="proc/set_opacity"><aside class="declaration">proc </aside>set_opacity<aside>(new_opacity)  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/datums/observation/opacity_set.dm#L21"><img src="git.png" width="16" height="16" title="code/datums/observation/opacity_set.dm 21"></a></aside></h3><p>Opacity Handling</p><h3 id="proc/singuloCanEat"><aside class="declaration">proc </aside>singuloCanEat<aside>()  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/modules/power/singularity/act.dm#L127"><img src="git.png" width="16" height="16" title="code/modules/power/singularity/act.dm 127"></a></aside></h3><p>Nar-Sie Act/Pull</p><h3 id="proc/spasm_animation"><aside class="declaration">proc </aside>spasm_animation<aside>(loops)  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/__HELPERS/matrices.dm#L33"><img src="git.png" width="16" height="16" title="code/__HELPERS/matrices.dm 33"></a></aside></h3><p>Similar to shake but more spasm-y and jerk-y</p><h3 id="proc/vv_edit_var"><aside class="parent"><a title="/datum" href="datum.html#proc/vv_edit_var">↑</a></aside>vv_edit_var<aside>(var_name, var_value)  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/game/atom_vv.dm#L13"><img src="git.png" width="16" height="16" title="code/game/atom_vv.dm 13"></a></aside></h3><p>call back when a var is edited on this atom</p>
<p>Can be used to implement special handling of vars</p>
<p>At the atom level, if you edit a var named &quot;color&quot; it will add the atom colour with
admin level priority to the atom colours list</p>
<p>Also, if GLOB.Debug2 is FALSE, it sets the [ADMIN_SPAWNED_1] flag on [flags_1][/atom/var/flags_1], which signifies
the object has been admin edited</p><h3 id="proc/vv_get_dropdown"><aside class="parent"><a title="/datum" href="datum.html#proc/vv_get_dropdown">↑</a></aside>vv_get_dropdown<aside>()  <a href="https://github.com/tired-wired/Monkeris/blob/7bcc975be6667acdc03f2a7b348d7d8038ddf01a/code/game/atom_vv.dm#L45"><img src="git.png" width="16" height="16" title="code/game/atom_vv.dm 45"></a></aside></h3><p>Return the markup to for the dropdown list for the VV panel for this atom</p>
<p>Override in subtypes to add custom VV handling in the VV panel</p></main><footer>cev_eris.dme <a href="https://github.com/tired-wired/Monkeris/tree/7bcc975be6667acdc03f2a7b348d7d8038ddf01a">7bcc975</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.10.0</a></footer></body></html>